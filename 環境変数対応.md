- いろいろやってる間にログ出力追加がマージされたのでそれをpullしてやり直す
- composer.jsonとcomposer.lockは入っていて正しい

- phpdotenvがインストールされていることを確認
- index.phpを編集
- .envは作成済
- DB情報を書き換えてみる（setting.php）
  - successを確認（send_rainfall）
- ActionクラスのURIを変えてみる
  - riverで動くことを確認
  - 単体テスト
    - 問題：Access denied for user ''@'localhost'
      - なぜ'root'すら出ない？
      - DBのところだけベタ打ちにしてやってみた
        - 結果：file_get_contents(): Filename cannot be empty
        - 考察：単体テストの時点では環境変数が効いていない
          - 下手するとsuccessも偽物の可能性？
      - ふつうの動作確認でデバッグ
        - 結果：getenv('URI_RIVER')にちゃんとURI入っているので問題なし
        - 考察：単体テストのときだけダメになる理由がある
          - 例：環境定数のファイルを引っ張ってくる前に使うところを実行している
      - TestCaseを見に行く
        - setUp()では何もしていない
        - .envを参照しているindex.phpはいつ見られる？
          - いつも通り：最初に見ている？
      - .envをプロジェクト全体に適用している処理を自力でやっちゃう
        ```
          $dot_env = __DIR__. '/../../.env';
          if (is_readable($dot_env)) {
              $dotenv = Dotenv\Dotenv::createUnsafeImmutable(__DIR__ . '/../../');
              $dotenv->load(__DIR__ . '/../../');
          }
        ```
      - あとは単体テストをやるだけ！
      
- 単体テスト：河川
  - 準備
  - 問題：ケース004（欠測3件）、観測所00002だけデータが出ない
    - 欠測時データ作成処理に問題が？
    - 観測所マスタ注入時、観測所00002がちゃんとレコードに入っていないのが原因
  - allOK 2020/11/09　8:40
- 貯留池
  - URIをgetenv(URI_RESERVOIR)に変更
  - 単体テスト準備
  - 単体テスト
    - ALLOK　2020/11/09　8:54
  - テスト用変更解除
- ポンプ
  - URI変更
  - 単体テスト準備
  - 単体テスト
    - なんか色々違う
      - 期待は番号（key）なし、実際は番号あり
      - 期待は配列、実際はオブジェクト
      - 期待がおかしい？
      - 実際がデータ取れてないのが前半に多い
    - 解決：日付のテスト対応してなかった
    - ALLOK　2020/11/09　9:18
    - テスト対応解除
- 雨量
  - URI変更
  - 単体テスト
    - ALLOK　2020/11/09　9:29
    - テスト用対応解除
- 浸水警報
  - URI変更
  - テスト用初修正
  - 単体テスト
    - ALLOK　2020/11/09　9:59
    - テスト用変更解除
- 余計な変更入れてないか見直し
  - 意図的に入れた変更
    - 環境変数定義ファイル.envを作成
    - index.php：環境変数定義ファイルからDB情報を取得するよう変更
    - 各アクションクラス：環境変数定義ファイルから送信先URIを取得するよう変更
    - 河川水位テスト用観測所マスタcsvファイル：観測所名の括弧を半角に変更
    - 浸水テストクラス説明：テスト手順にwikiを参照する文面を追加
    - 各テストクラス：本来index.phpでやる環境変数定義をsetUp()にて実行
- メモ：「環境変数」とはいうが「環境定数」とは言わないっぽい
    
